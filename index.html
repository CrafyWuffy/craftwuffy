<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Yerli Yapay Zeka | Profesyonel Dev</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.4.2/css/all.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/core@latest/dist/css/tabler.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/11.7.0/sweetalert2.min.css">
    
    <style>
        :root { --p: #0054a6; --bg: #f4f7f9; --dark-card: #1a1d21; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: var(--bg); color: #333; }
        .navbar { background: rgba(255,255,255,0.9) !important; backdrop-filter: blur(10px); box-shadow: 0 4px 30px rgba(0,0,0,0.05); }
        .nav-link { font-weight: 700; color: #444 !important; border-radius: 8px; transition: 0.2s; cursor: pointer; }
        .nav-link.active { color: var(--p) !important; border-bottom: 3px solid var(--p); }
        .hero { background: linear-gradient(135deg, #001f3f 0%, #0054a6 100%); color: white; padding: 100px 0; position: relative; overflow: hidden; }
        .hero::after { content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 50px; background: var(--bg); clip-path: polygon(0 100%, 100% 100%, 100% 0); }
        .ip-badge { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); padding: 15px 30px; border-radius: 50px; cursor: pointer; transition: 0.3s; display: inline-flex; align-items: center; }
        .content-card { border: none; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.04); transition: 0.3s; margin-bottom: 30px; }
        .sidebar-card { background: var(--dark-card); color: white; border-radius: 20px; padding: 25px; }
        .status-pill { background: rgba(255,255,255,0.05); border-radius: 12px; padding: 15px; margin-bottom: 15px; border: 1px solid rgba(255,255,255,0.1); }
        .dot { width: 10px; height: 10px; border-radius: 50%; display: inline-block; margin-right: 8px; }
        .dot-online { background: #2fb344; box-shadow: 0 0 10px #2fb344; }
        .dot-offline { background: #d63939; }
        .live-post { background: #fff; border-radius: 15px; padding: 15px; margin-bottom: 15px; border-left: 5px solid var(--p); animation: fadeIn 0.5s; }
        .user-head { width: 32px; height: 32px; border-radius: 5px; margin-right: 10px; vertical-align: middle; }
    </style>
</head>
<body>

<div class="hero text-center">
    <div class="container animate__animated animate__fadeInDown">
        <span class="badge bg-warning text-dark mb-3 fw-bold p-2 px-3 shadow">ğŸš€ BU AKÅAM AÃ‡ILIYOR!</span>
        <h1 class="display-3 fw-extrabold mb-2">Yerli Yapay Zeka</h1>
        <div class="ip-badge" id="copyIp" data-clipboard-text="94.154.46.130">
            <i class="fa fa-copy me-3"></i><span class="h3 mb-0 fw-bold">94.154.46.130</span>
            <span class="ms-3 badge bg-success" id="heroCount">...</span>
        </div>
    </div>
</div>

<nav class="navbar navbar-expand-lg navbar-light sticky-top py-3">
    <div class="container">
        <div class="navbar-nav mx-auto gap-2 align-items-center">
            <a class="nav-link active" onclick="show('anasayfa')"><i class="fa fa-home-alt me-2"></i>Anasayfa</a>
            <a class="nav-link" onclick="show('forum')"><i class="fa fa-comments me-2"></i>Forum</a>
            <a class="nav-link" onclick="show('magaza')"><i class="fa fa-shopping-bag me-2"></i>MaÄŸaza</a>
            <a class="nav-link" onclick="show('destek')"><i class="fa fa-headset me-2"></i>Destek</a>
            <div id="authArea" class="ms-lg-4">
                <button class="btn btn-primary rounded-pill px-4 fw-bold" onclick="loginModal()">
                    <i class="fa fa-sign-in me-2"></i>GiriÅŸ Yap
                </button>
            </div>
        </div>
    </div>
</nav>

<div class="container my-5">
    <div class="row">
        <div class="col-lg-8">
            <div id="anasayfa_sec">
                <div class="card content-card p-5 animate__animated animate__fadeInLeft">
                    <h2 class="fw-bold mb-4">ğŸ“° Son Haberler</h2>
                    <img src="https://images.unsplash.com/photo-1627375103210-999330965e64?q=80&w=1000" class="img-fluid rounded-4 mb-3">
                    <h3 class="fw-bold">BÃ¼yÃ¼k AÃ§Ä±lÄ±ÅŸa HazÄ±r mÄ±sÄ±n?</h3>
                    <p class="text-muted fs-5">Bu akÅŸam saat 20:00'da kapÄ±larÄ±mÄ±zÄ± aÃ§Ä±yoruz. Oyundaki ÅŸifrenle siteye giriÅŸ yapabilirsin!</p>
                </div>
            </div>

            <div id="forum_sec" style="display:none;">
                <div class="card content-card p-4">
                    <h2 class="fw-bold mb-4">ğŸ’¬ Topluluk Forumu</h2>
                    
                    <div id="forumInputArea">
                        <div class="alert alert-info rounded-4">
                            <i class="fa fa-info-circle me-2"></i> Mesaj yazmak iÃ§in Ã¶nce <b>GiriÅŸ YapmalÄ±sÄ±n.</b>
                        </div>
                    </div>

                    <div id="post_loading" class="text-center d-none"><div class="spinner-border text-primary"></div></div>
                    <div id="dynamic_posts" class="mt-4"></div>
                </div>
            </div>
            
            <div id="magaza_sec" style="display:none;">
                <h2 class="fw-bold mb-4 text-center">ğŸ›’ Sunucu Marketi</h2>
                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="card content-card p-4 text-center">
                            <i class="fa fa-crown fa-3x text-warning mb-3"></i>
                            <h4>VIP Ãœyelik</h4>
                            <p class="price mb-3">50 TL</p>
                            <button class="btn btn-primary rounded-pill w-100">SatÄ±n Al</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="sidebar-card shadow-lg sticky-top" style="top: 100px;">
                <h4 class="fw-bold mb-4 border-bottom border-secondary pb-3">ğŸŒ CanlÄ± Durum</h4>
                <div class="status-pill">
                    <div class="small opacity-50 mb-1 text-uppercase">Kurucu</div>
                    <div class="d-flex align-items-center">
                        <div id="admin-dot" class="dot dot-offline"></div>
                        <span id="admin-status" class="fw-bold">YÃ¼kleniyor...</span>
                    </div>
                </div>
                <div class="status-pill">
                    <div class="small opacity-50 mb-1 text-uppercase">Aktif Oyuncu</div>
                    <div class="fw-bold text-success" id="side-count">0 / 0</div>
                </div>
                <a href="https://discord.gg/XAhyeXNjKr" class="btn btn-primary w-100 py-3 fw-bold rounded-pill shadow">DÄ°SCORD</a>
            </div>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/11.7.0/sweetalert2.all.min.js"></script>

<script>
    // --- TEMEL SÄ°STEMLER ---
    new ClipboardJS('#copyIp').on('success', () => Swal.fire('IP KopyalandÄ±!', '', 'success'));

    function show(id) {
        $('.nav-link').removeClass('active');
        $(`a[onclick="show('${id}')"]`).addClass('active');
        $('#anasayfa_sec, #forum_sec, #magaza_sec, #destek_sec').hide();
        $(`#${id}_sec`).fadeIn();
        if(id === 'forum') loadPosts();
    }

    // --- GÄ°RÄ°Å SÄ°STEMÄ° ---
    function loginModal() {
        Swal.fire({
            title: 'Minecraft GiriÅŸi',
            text: 'Oyundaki adÄ±n ve ÅŸifrenle gir.',
            html: `
                <input type="text" id="login-user" class="swal2-input" placeholder="KullanÄ±cÄ± AdÄ±">
                <input type="password" id="login-pass" class="swal2-input" placeholder="Åifre">
            `,
            confirmButtonText: 'GiriÅŸ Yap',
            preConfirm: () => {
                const username = $('#login-user').val();
                const password = $('#login-pass').val();
                if(!username || !password) return Swal.showValidationMessage('BoÅŸ bÄ±rakma!');
                return { username, password };
            }
        }).then((res) => {
            if(res.isConfirmed) {
                // API'ye gÃ¶nder (api/login.js)
                $.ajax({
                    url: '/api/login',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(res.value),
                    success: function(data) {
                        localStorage.setItem('mc_user', data.username);
                        Swal.fire('HoÅŸ geldin!', data.username, 'success').then(() => location.reload());
                    },
                    error: () => Swal.fire('Hata', 'Åifre veya kullanÄ±cÄ± adÄ± yanlÄ±ÅŸ!', 'error')
                });
            }
        });
    }

    function checkAuth() {
        const user = localStorage.getItem('mc_user');
        if(user) {
            // Navbar'Ä± gÃ¼ncelle
            $('#authArea').html(`
                <div class="dropdown">
                    <button class="btn btn-light rounded-pill dropdown-toggle fw-bold" data-bs-toggle="dropdown">
                        <img src="https://minotar.net/helm/${user}/32" class="user-head"> ${user}
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item text-danger" href="#" onclick="logout()">Ã‡Ä±kÄ±ÅŸ Yap</a></li>
                    </ul>
                </div>
            `);
            // Forum giriÅŸini aktif et
            $('#forumInputArea').html(`
                <div class="bg-light p-4 rounded-4 mb-4 shadow-sm border">
                    <h5 class="fw-bold mb-3">Mesaj Yaz (Olarak: ${user})</h5>
                    <div class="d-flex gap-2">
                        <input type="text" id="f_msg" class="form-control" placeholder="Bir ÅŸeyler yaz...">
                        <button onclick="savePost()" class="btn btn-primary px-4 fw-bold">GÃ¶nder</button>
                    </div>
                </div>
            `);
        }
    }

    function logout() {
        localStorage.removeItem('mc_user');
        location.reload();
    }

    // --- FORUM SÄ°STEMÄ° ---
    function loadPosts() {
        $('#post_loading').removeClass('d-none');
        $.get('/api/forum', function(data) {
            let h = '';
            data.forEach(p => {
                h += `
                <div class="live-post shadow-sm">
                    <div class="d-flex align-items-center mb-2">
                        <img src="https://minotar.net/helm/${p.username}/32" class="user-head">
                        <div>
                            <div class="fw-bold text-primary">${p.username}</div>
                            <small class="text-muted">${new Date(p.created_at).toLocaleString()}</small>
                        </div>
                    </div>
                    <div class="ps-1">${p.content}</div>
                </div>`;
            });
            $('#dynamic_posts').html(h || '<p class="text-center">HenÃ¼z mesaj yok.</p>');
            $('#post_loading').addClass('d-none');
        });
    }

    function savePost() {
        const user = localStorage.getItem('mc_user');
        const msg = $('#f_msg').val();
        if(!msg) return;

        $.ajax({
            url: '/api/forum', type: 'POST', contentType: 'application/json',
            data: JSON.stringify({ username: user, content: msg }),
            success: function() {
                $('#f_msg').val('');
                loadPosts();
            }
        });
    }

    // --- Ä°STATÄ°STÄ°KLER ---
    function sync() {
        $.getJSON('https://api.mcstatus.io/v2/status/java/94.154.46.130', d => {
            if(d.online) {
                let t = d.players.online + " / " + d.players.max;
                $('#side-count, #heroCount').text(t);
            }
        });
        $.getJSON('https://api.lanyard.rest/v1/users/812040098388377671', r => {
            const s = r.data.discord_status !== 'offline';
            $('#admin-dot').attr('class', 'dot ' + (s ? 'dot-online' : 'dot-offline'));
            $('#admin-status').text(s ? 'AKTÄ°F' : 'Ã‡EVRÄ°MDÄ°ÅÄ°');
        });
    }

    $(document).ready(() => {
        checkAuth();
        sync();
        setInterval(sync, 30000);
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
</body>
</html>
